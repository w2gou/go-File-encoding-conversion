# 1. 前提
1. 这是一个go编写的web服务
2. 实现简单的文件上传，下载，编码格式转换
3. 支持高并发
4. 可以复用开源框架或工具
5. 无数据库，文件数据都放在内存中
6. 界面先用一个静态文件直接加载或用方便的前端语言开发

# 2. 功能需求
## 1. 文件上传
1. 支持pc端文件上传，点击上传打开windows系统资源目录文件夹进行选择文件上传
2. 支持手机上传文件，点击上传打开一个二维码界面，手机端（安卓）进行扫码打开文件管理器进行选择文件上传

## 2. 文件管理
1. 支持文件重命名，删除
2. 展示文件名称，上传时间，编码格式

## 3. 文件下载
1. 支持pc端文件下载，点击下载打开windows系统资源目录文件夹进行选择下载目录，确认后将文件下载到选中目录
2. 支持手机下载文件，点击下载打开一个二维码界面，手机端（安卓）进行扫码打开文件管理器进行选择文件下载目录，确认后将文件下载到选中目录

## 4. 文件转码
1. 点击转码，展示当前编码格式（需要系统判断这个文件是什么编码格式），然后下拉框选择目标编码格式（内置默认几种通用编码格式，如gbk/utf-8等），确认后进行文件转码，并覆盖原文件

## 5. 打包及部署
1. 打包为多平台可执行文件（Windows，Linux）
2. 支持docker部署，提供docker构建文件


# 3. 补充信息
我的补充信息如下，按照我的补充信息重新生成开发方案文档，全覆盖输出到 coding/design.md 文件中，还有需要我补充确认的问题也一起输出
1. “PC 下载选择目录”“手机下载选择目录”接受用浏览器默认下载行为替代
2. 使用场景是局域网内使用
3. 典型文件类型与大小范围如：（`.txt/.csv/.log`，单文件最大 100MB；总量可以支持大概10000个文件）
4. 文件在内存中的保留策略：最大10000个文件，超过后，上传时自动删除最老的上传文件
5. 需要支持的编码清单，常见的中英文编码
6. 转码失败时的期望：严格失败并提示
7. 需要“一次性下载链接/二维码一次性使用”这两个安全策略
8. 前端形态：纯静态 HTML/JS 即可，后续再说引入前端框架（Vue/React）
9. 放在内存是我现在自己用，以后用的人多了可以用数据库，现在就把文件放在内存就行

我的补充信息如下，按照我的补充信息重新生成开发方案文档，全覆盖输出到 coding/design.md 文件中，还有需要我补充确认的问题也一起输出
1. `MAX_TOTAL_SIZE_MB` 希望默认 300M 暂时
2. “高并发”的目标量级：大致同时在线 1000 /并发上传 1000/并发下载 1000
3. 允许任意文件但仅对“可识别文本”开放转码
4. 文件重命名规则：不允许重名，暂不需要禁止特殊字符/限制长度
5. 手机扫码主要用什么（微信/浏览器），微信扫码也是跳转浏览器

我的补充信息如下，按照我的补充信息重新生成开发方案文档，全覆盖输出到 coding/design.md 文件中，还有需要我补充确认的问题也一起输出
1. 文件名唯一冲突时的期望行为：直接拒绝（返回“重名”），并还原文件名
2. “可识别文本”判定阈值更倾向：宁可少放行（更安全）
3. 需要支持的“目标编码下拉框”最终清单与展示顺序（按建议列表来）
4. LAN 访问地址用配置文件来进行配置吧，还有访问端口这些

我的补充信息如下，按照我的补充信息重新生成开发方案文档，全覆盖输出到 coding/design.md 文件中，还有需要我补充确认的问题也一起输出
1. 配置文件格式YAML或者TOML你定就行，都可以接受
2. `server.listen` 默认希望监听：`0.0.0.0:8080` 
3. 上传请求若缺失 `Content-Length`（极少见，但可能存在）直接拒绝（更安全，避免内存不可控）

我的补充信息如下，按照我的补充信息重新生成开发方案文档，全覆盖输出到 coding/design.md 文件中
1. `server.base_url` 的取值口径：填写“手机可达的 LAN IP”（例如 `http://192.168.1.10`）
2. 文件名唯一性不需要“大小写不敏感”（例如 `a.txt` 与 `A.txt` 视为不重名）


## 生成开发步骤文档
现在按照这个开发方案文档  coding/design.md，帮我生成一个详细的开发步骤文档，可以指导我一步一步完成这个开发功能，开发步骤文档输出到  coding/develop.md 文件中
